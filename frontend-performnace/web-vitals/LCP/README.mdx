# LCP (Largest Contentful Paint)

## 如何影響 user

第一屏，能看見的最大元素(且是`相對於其他元素`)，e.g. Image、Logo、Video、Article

## 計算方式

> For developer：

1. User `第一次` 與網頁互動。
2. Browser `回應` User `第一次` 與網頁互動的時間。

> 簡單的時間軸：

1. FCP -> FID -> TTI

![FID](assets/FID.png)

> 預期：

1. Browser 回應時間越快越好。
2. Javascript 越快註冊 event listener 越好。

P.S. 研究上能達到 `100ms` 內最好

## 影響因子

簡單來說就是，Javascript 執行太久，導致 main thread blocked 太久。

P.S.
常見得如: input or button，要有作用就要等 react register listeners。（如果是用 controlled from 的方式)

拿 input 來看，如果是

1. 傳統 html input: 可以直接輸入，而不必等 react register listener, 因為 input value 是瀏覽器控制的.

2. JSX + controlled from: 要等 useState value and onChange listener setup.

## 如何改善

避免 main thread blocked，減輕 javascript 執行時間.

1. 避免首次 render 時:
   a. 執行 heavy javascript, 適當使用 async.
   b. 執行過多第三方 library.(For example: tracking, ad, etc)

2. Async or preload css, script sources.

3. 適當使用 code splitting, 減輕每次 javascript request size.

4. 適當使用 web worker 執行一些背景工作.

## Refs

[web.dev](https://web.dev/articles/fid?hl=zh-tw)
