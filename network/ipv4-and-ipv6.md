# IPv4 and IPv6

Before we start, please make sure you have read the

1. [NAT](./nat.md)

## IPv4 與 IPv6 的差異

### 1. IPv4

- **地址格式**:

  IPv4使用32位地址表示，由4個十進制數組成，每個數範圍是0到255，例如`192.168.1.1`。

- **地址數量限制**:

  IPv4最多提供約**43億個地址**($2^{32}$)，由於全球設備數量急劇增加，IPv4地址資源已經接近枯竭。

- **NAT(網路位址轉換)**和**私有IP地址**:

  是IPv4中廣泛使用的技術，目的是為了節省有限的IPv4地址空間。

  詳情請見 [NAT](./nat.md)

### 2. IPv6

- **地址格式**:

  IPv6使用128位地址表示，格式為8組十六進制數，每組16位(例如`2001:0db8:85a3:0000:0000:8a2e:0370:7334`)。

  有時可以簡化為短寫(如`2001:db8:85a3::8a2e:370:7334`)。

- **地址數量增長**:

  IPv6 提供了**龐大的地址空間**，最多可支持約$3.4 \times 10^{38}$個地址($2^{128}$)，

  幾乎無法耗盡，理論上足以為所有設備，提供獨立的公有IPv6地址。

  使每台設備在理論上都可以擁有唯一的公有IP。

- **IPv6中通常不需要NAT**，具體原因如下：

  - **充足的地址空間**:

    IPv6的128位地址能夠為全球的每個設備分配獨立的IP地址，因此內網設備可以直接分配到全球唯一的公有IPv6地址，而不需要透過NAT共享。

  - **無NAT的直接通訊**:

    IPv6設計上避免了NAT的使用，這樣內網設備可以直接與外部網路上的設備進行通信，無需經過地址轉換。

  - **私有IPv6地址**:

    IPv6中也存在私有IP地址的概念(例如`fd00::/8`範圍的ULA地址，僅供內部網路使用)，但並不像IPv4那樣依賴NAT來進行外部通信。

- **自動配置和多重支持**:

  IPv6支持更多的先進功能，如: 無需NAT的內建多播支援、IP自動配置等，且IPv6設備能直接使用全球唯一的地址進行通訊。

  例如: IPv6支持**自動地址配置**:

  允許設備自動生成全球唯一的IPv6地址，而不需要DHCP服務器的協助：

  - **SLAAC(Stateless Address Autoconfiguration)**:

    通過SLAAC機制，IPv6設備可以從路由器接收前綴資訊，並設備自動生成唯一的IPv6地址。

  - **DHCPv6**:

    在需要更細緻控制的網路環境中，也可以使用DHCPv6來分配IPv6地址，但這並非必須的。

- **IPv6中的NAT替代方案**:

  雖然IPv6的設計目標是不再使用NAT，

  但在某些情況下，出於安全或網路隔離的考量，仍然可以使用一種稱為**NAT66**的技術(IPv6的NAT版本)。

  不過，這種方式並不常見，且不被IPv6標準建議使用。

- **IPv6的安全性**:

  IPv6在設計上考慮了安全性，並且內建了IPsec支持，這是一種用於網路層的加密和認證協定。

  詳情請見 [IPv6 Security](./ipv6-security.md)

## 總結

- **IPv4和IPv6**:

  IPv4是32位地址，數量有限；

  IPv6是128位地址，數量極其龐大，適應了現代設備數量的增長需求。
